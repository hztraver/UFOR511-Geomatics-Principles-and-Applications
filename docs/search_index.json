[["index.html", "UFOR 511: Geomatics Principles and Applications Welcome How to use these resources How to get involved", " UFOR 511: Geomatics Principles and Applications Paul D. Pickell 2024-08-14 Welcome These are the course materials for UFOR 511 in the Master of Urban Forestry Leadership (MUFL) at the University of British Columbia (UBC). These Open Educational Resources (OER) were developed to foster the Geomatics Community of Practice that is hosted by the Faculty of Forestry at UBC. These materials are primarily lab assignments that students enrolled in UFOR 511 will complete and submit for credit in the program. Note that much of the data referenced are either public datasets or otherwise only available to students enrolled in the course for credit. Deliverables for these assignments are submitted through the UBC course management system and only students enrolled in the course may submit these assignments for credit. How to use these resources Each “chapter” is a standalone lab assignment designed to be completed over one or two weeks. These assignments are designed for emerging urban forestry leadership professionals who seek to expand their skillset in fundamental geomatics concepts as applied to the field of urban forestry. Students enrolled in UFOR 511 will submit all deliverables through the course management system at UBC for credit and should consult the schedule and deadlines posted there. The casual user can still complete the tutorials step-by-step, but the data that are not already publicly available are not hosted on this website and therefore you will not have access to them. Unless otherwise noted, all materials are Open Educational Resources (OER) and licensed under a Creative Commons license (CC-BY-SA-4.0). Feel free to share and adapt, just be sure to share with the same license and give credit to the author. How to get involved Because this is an open project, we highly encourage contributions from the community. The content is hosted on our GitHub repository and from there you can open an issue or start a discussion. Feel free to open an issue for any typos, factual discrepancies, bugs, or topics you want to see. We are always looking for great Canadian case studies to share! You can also fork our GitHub repository to explore the source code and take the content offline. "],["geocoding-exploring-geospatial-data.html", "Lab 1 Geocoding and Exploring Geospatial Data Lab Overview Task 1: Download and Prepare Data Task 2: Prepare Data Task 3: Geocoding a Table of Addresses Task 4: Create a Shapefile from CSV data Task 5: Create an Urban Map", " Lab 1 Geocoding and Exploring Geospatial Data Written by Amy Blood Lab Overview Working with and manipulating your own geospatial data is essential for many geomatics tasks. Often in urban forestry, you will come across datasets with addresses or coordinates. In this lab, you will learn how to import a CSV into ArcGIS Pro, and how to create an address locator and geocode addresses. You will work from data within Vancouver to create several new geospatial datasets and practice geocoding addresses. Learning Objectives Query and extract geospatial data from an online portal Build a custom address locator using geospatial data Geocode addresses and assess quality Deliverables You will be submitting the following: Answers to any questions posed in the lab handout submitted through Canvas. A pdf map complete with all necessary elements (scale, compass, legend, etc.) Data You will be downloading some of your data from the City of Vancouver Open Data Portal. The data package on Canvas contains Greater Vancouver Regional District (GVRD) Roads shapefile and parktrees.csv. The CSV file was received from the City of Vancouver Board of Parks and Recreation and represents trees in parks of Vancouver. Task 1: Download and Prepare Data Step 1: The first dataset you will download is “street trees” data. Search for it with the search bar, then click the link for the dataset. You are going to want to export the data as a shapefile; click on the Export tab and look over the geographic file formats. You will notice that the download button for Shapefile is greyed out because there are too many records in the dataset. Keep the webpage open so you have access to the Metadata. Q1. What is the maximum number of records you can export from the city of vancouver open data portal as a shapefile? Step 2: Instead of working with the entirety of the dataset, you will focus on one neighbourhood. To the left, there are filtering options. Scroll down to NEIGHBOURHOOD_NAME and choose the neighborhood with the highest number of trees. Now you should have the option to download street tree data. Step 3: The second dataset you will download is public parks. There should be a point and a polygon dataset. Make sure you download the polygon dataset. Task 2: Prepare Data In this task, you will export a filtered table from a shapefile, and then you will add a field so the table can be used in the next task. Step 1: Open up the metadata for the street trees file. It should be under the “Information” tab on the data website. Look through the metadata and make yourself familiar with what each column means. For example, one column designates when a tree was planted. Q2. What is the name of the column that designates when a tree was planted? Sometimes, “lots” in cities are exceptionally large or are adjacent to more than one street. Because these lots only have one “true” address, urban foresters may make up addresses to designate more specific areas. Find the name of the column that designates whether or not the address for a tree was made up to associate the tree with a nearby lot. You are going to export just the data for trees that are assigned “Yes” in this column. Step 2: Right-click street-trees and select “Export Table.” Input Rows: street-trees Output Location: Where you want the table to be saved Output Name: AssignedTrees Expression: + New expression Where Assigned is equal to Y. Step 3: Open the attribute table for AssignedTrees and add a new text field to the data. On the top of the attribute table, there is a button that says “Add”. The table will switch to field view. Name the field “Address”, name the alias “Address”, and select “Text” as the data type. Click “Save” in the top bar. Close “Field View” and return to the attribute table. Your new field should appear as the very last column in the dataset. Right-click the field and select “Calculate Field.” The address locator you create in Task 3 requires addresses to be written in a specific way—street numbers and names must be in the same column. You will need to specify to ArcGIS that you are combining two strings (another designation for text data). Within the Fields menu under “Expression,” double-click civic_numb. You will notice that the field below the equal sign is now populated with !civic_numb!. To combine the two columns together, type the following code into the box: str(!civic_numb!)+\" \"+str(!std_street!) Click “Apply”. The Address field should now have street numbers and street names. Task 3: Geocoding a Table of Addresses Many localities label their trees by address rather than by coordinates. In the street-trees file, all of the trees have addresses and coordinates. However, the trees with a value of “Y” for “Assigned” have addresses that were effectively made up for ease of finding the trees again. In this section of the lab, you will use the GVRD_roads file to create an address locator for Vancouver. Then you will geocode the addresses from AssignedTrees to examine the differences between collecting data with addresses versus coordinates. An address locator allows you to look up addresses either manually or by uploading a table of addresses. This is helpful when you are searching for specific trees! Step 1: Create an address locator, which is located in Analysis &gt; Tools &gt; Toolboxes &gt; Geocoding Tools &gt; Create Locator. You can also use the search bar to search for the tool by name. For the tool’s parameters: Country or Region: Canada Primary Table(s): GVRD_roads Role: Street Address Field Map: Feature ID: OBJECTID Left House Number From: FROM_LEFT_HOUSE_NUMBER Left House Number To: TO_LEFT_HOUSE_NUMBER Right House Number From: FROM_RIGHT_HOUSE_NUMBER Right House Number To: TO_RIGHT_HOUSE_NUMBER Street Name: STRUCTURED_NAME_1 Left City/Municipality: LEFT_LOC_1 Right City/Municipality: RIGHT_LOC_1 All other fields leave as &lt;NONE&gt; Language Code: English Save the file as GVRDaddresses. Step 2: Select Locate underneath the Map tab, and then click on Address Inspector. Use your newly created address locator to click around Vancouver. You may need to double-click on your map in order to force the pop-up to stay visible and docked as a tab (see right pane below). Choose GVRDaddresses in the dropdown. You can also use the Locate tool to Search an address using the ArcGISWorld Geocoding Service. Type in the address of Queen Elizabeth Park (4600 Cambie St, Vancouver) and notice the map highlights near the park! The ArcGIS World Geocoding Service will consume credits through your ArcGIS account, so it is not the most cost-effective way to geocode many addresses. Step 3: Geocode a table of addresses using GVRDaddresses. The table of addresses you will be geocoding is the AssignedTrees dataset. To access the geocoding tool, you can search for Geocode Addresses. Below are the tool’s parameters: Input Table: AssignedTrees Input Address Locator: GVRDaddresses Input Address Fields: Single Field Field Name: Full Address Alias Name: Address Save the file as geocoded. Step 4: Look at the attribute table. The score column shows from 0-100 based on how close the address in the address locator was able to match the input table. The mailbox icon with the arrows in the geocoding toolbar allows you to investigate the matches more in-depth. With a messier dataset, this becomes invaluable. Q3. Are all of the addresses a 100% match? why or why not? Step 5: Toggle the AssignedTrees and geocoded datasets on and off to look for similarities and differences. Q4. How do they visually compare to each other? Use specific examples in your explanation and make inferences about why you are seeing differences/similarities. Task 4: Create a Shapefile from CSV data Oftentimes, you will encounter geospatial data in CSV format. Although each value in the dataset has a location, the dataset has not been provided as shapefiles. In this portion of the lab, you will practice converting CSVs into shapefiles. Then, you will work with the shapefiles you have created. Step 1: Open the parktrees.csv file in Excel. There should be 6 columns and several rows. Each row represents a tree in a Vancouver Park. Q5. How many trees are represented in this file? Q6. Look at the columns with the coordinates. Which units are the coordinates likely in? Step 2: Exit Excel and bring up ArcGIS Pro, where you will be adding the data to your map. Look at the data in the Catalog. Q7. Does arcgis pro consider this data to be spatial? Step 3: Go to Map &gt; Add Data &gt; XY Point Data, and select parktrees.csv. Choose the appropriate column names for the X and Y fields. Leave the Z field blank. This is very important, if you choose the wrong columns the points will be nowhere near Vancouver! Q8. What does the z field represent? Q9. Which column did you choose for x, which column for y? Specify the coordinate system by clicking on the Globe icon to the right-hand side of Coordinate System and locating NAD 1983 UTM Zone 10 under Projected Coordinate System &gt; UTM &gt; NAD 1983. You have now created an “Event Layer.” Export the Events layer as a shapefile (right-click the layer &gt; Data &gt; Export Features). Save it in your output folder as parktrees. Add parktrees to your display. Event layers are temporary layers, and without Object-ID fields they are not editable or selectable. Step 4: View parktrees in ArcGIS Pro. The trees should all be in Vancouver. If they are not, something was input incorrectly and you will have to repeat Step 2. Once the tree points are properly mapped, change the symbology. Right-click parktrees in the Contents Pane and choose “Symbology.” A Symbology pop-up should appear. Click the symbol—and choose “Circle 3” from Gallery. Click the Properties Tab. Make the symbol smaller and change its colour. Add parks_polygon_representation and a satellite basemap to your map (Map &gt; Basemap &gt; Imagery). In the Contents Pane, drag the basemap to the bottom so that it does not cover anything. Symbolize parks_polygon_representation so that you can clearly the basemap for each park. You can do this in the Contents Pane by right-clicking the coloured rectangle beneath parks_polygon_representation and choosing “Color Properties…” at the bottom. Adjust the colours and transparency as you see fit. Q10. What sort of discrepancies do you see between the number of trees in the satellite image versus the number of trees shown in the dataset? Do any specific parks stand out? Why might this be the case? Step 5: Now that all of the park trees are input, we will investigate tree density per park to get an idea about which parks in Vancouver have the highest tree density and which have the lowest. To answer this question, you will need to know the area of each park and the number of trees within them. Park area and name are in the parks_polygon_representation layer, but not in the parktrees shapefile. This information can be added to parktrees through a spatial join. Right-click parks_polygon_representation, mouse down to Joins and Relates &gt; Spatial Join: Target Features: parks_polygon_representation Join Features: parktrees Output Feature Class: parks_numtrees Join Operation: Join one to one Match Option: Intersect Click “OK”. You should now have a park file with the number of trees (represented by JOIN_COUNT), along with the other park information. Add a new field called “treedensity”. Select float as the data type–the data in this field will be continuous values and include decimals. Tree density is the ratio of trees to park area. We will do this calculation only for parks greater than or equal to one hectare in size. Using “Select By Attributes,” select all of the parks with an area greater than or equal to 1 ha. Then, calculate the treedensity field as JOIN_COUNT / area_ha. Q11. How many parks in vancouver are greater than 1 ha in size? Q12. From the selected data, which park has the highest tree density? Change the symbology of parks_numtrees from single symbol to unclassed colors displaying the tree density field. Task 5: Create an Urban Map Finally, all of the components of this lab will be brought together with a map. The map should be 11”x17”, either landscape or portrait. The map will be of the neighbourhood for which you downloaded street tree data for. Zoom to that neighborhood. Requirements: Parks symbolized by tree density Coordinate-created points and address-created points (symbolized differently from each other!) Roads symbolized - Necessary map components (title, legend, scale bar, north arrow, student name and number, coordinate system) Export your map to PDF and upload it to Canvas along with the other lab questions. "],["GNSS-data.html", "Lab 2 Collecting and processing GNSS data Lab Overview Task 1: Preparing for GNSS Data Collection Task 2: Collect GNSS Data Task 3: Assess Precision, Accuracy, and Possible Errors Lab Deliverable (40 points total)", " Lab 2 Collecting and processing GNSS data Written by Paul D. Pickell Lab Overview Oftentimes, you will need to collect and display your own data. There are many phone applications to collect your own GNSS data. In this lab, you will plan your own GNSS collection, collect data, and process the data. Learning Objectives Plan for field data collection Use AvenzaMaps to collect GNSS readings Assess the accuracy and precision of GNSS coordinates Deliverables During this lab, you should be taking notes so that you are able to write a brief report about your study area and discuss the GNSS collection and processing procedure. You will be submitting a two-page report, described in detail toward the end of the lab. Task 1: Preparing for GNSS Data Collection Field data collection is an important skill set to learn and practice. In this task, you will plan the collection of your GNSS data in a public park. The task for collecting GNSS data in a public park has nearly the same risks as if you collected the data on campus and you are expected to take similar precautions. This section is meant to inform you of the likely hazards and how to stay safe. Planning Your Data Collection Safety starts at the planning stage. When planning which park you will visit, consider somewhere nearby that is easily accessible by transit or walking. Avoid going somewhere that is unfamiliar to you. Ensure that you are visiting a public park and stay off of private or restricted property. You should only visit the park during daylight hours and plan to go out in sunny weather only. Check government websites for any recent animal sightings before you commit to going to your desired park. Do not plan to collect your GNSS data near bodies of water (e.g., oceans, lakes, ponds, rivers, streams). Do not plan to collect your GNSS data near cliffs or on steep terrain. Finally, ensure that you will have good cell phone coverage in case of an emergency. Likely Hazards At all times, you must be aware of possible hazards both overhead and underfoot. The main overhead hazard in a public park is going to be trees and falling branches. Do not collect your GNSS data during windy or stormy weather, which may cause tree branches to fall. Wet and slippery surfaces, steep angles, holes, logs, debris, and loose soil all pose fall hazards. Many of these hazards can be avoided with careful planning before you even step outside. Speaking of stepping, make sure you wear appropriate footwear, closed toed shoes are best for this work. Fauna are natural inhabitants of parks. Do not visit parks with recent sightings for large, predatory fauna such as bears or cougars. Even urban parks like Stanley Park in downtown Vancouver are known to have coyotes who have attacked people. As well, avoid areas with hazardous flora that may be thorny or poisonous. You may need to cross or transit streets to reach your park. Always follow local traffic laws and look for moving vehicles in and around your park. Always use designated crosswalks and do not look at your phone when walking near stopped or moving vehicles. Do not collect your GNSS data while walking and looking at your phone. Always be aware of your surroundings. Important: If you feel uncomfortable undertaking this task, please contact the instructor for alternative arrangements or accommodations for this particular assignment All studies require a study area—for this lab, you will decide on your own study area through your own knowledge and simple remote sensing. Your study area must: Be somewhere that you can legally and safely visit Be a park or a greenspace Have at least a portion of its ground visible using aerial imagery (e.g. Google Earth or an ArcGIS Pro basemap) Step 1: Open ArcGIS Pro and turn on an imagery basemap (Map &gt; Basemap &gt; Imagery). Navigate to your proposed study area. You can do this by (a) dragging around your map, (b) putting coordinates into Go To XY, (c) typing in an address or park name into the Locate tool. Before physically visiting your study area, you will need to verify that there are usable reference points in your chosen park. The reference points should be immovable, viewable from the sky and ground, and not tall (not trees or buildings). Additionally, you will be walking to your points – so they should be somewhere safely accessible and not too close or too far from each other. Step 2: Find at least four possible reference points (all at least 10 m from each other). You will create a new shapefile and populate it with these reference points. In Geoprocessing, find the Create Feature Class tool by searching for “Create Feature Class”. Save it to a findable location and give it a meaningful name (for this lab, it will be called “refpoints”). For the other options: Geometry Type: Point Has M: No Has Z: No Coordinate System: –Local UTM– Click “Run” Your new shapefile should now be in the “Contents” Pane, but it has no points. Choose Edit from the top ribbon, then select “Create.” On the right, a “Create Features” pane will appear. In there, click refpoints, then select “Create a Point Feature.” Zoom in closely on the basemap before creating point features so that the points are more accurate. Click on (at least) four reference points, then select “Save” from the Edit ribbon. If you need to Move a reference point, you can select Move from the Edit Tools. Open the attribute table of refpoints and add three new columns: Name, East, North. Populate the columns for each reference point: Name – a unique name. East – Easting. North – Northing. Easting and Northing can be populated using “Calculate Geometry.” For more relatable measurements in your precision and accuracy assessment (Task 3), use your local UTM for the geometry. Be sure to save your edits. Step 3:You will be exporting a georeferenced map of your study area. Zoom in (or out) to an extent that contains at least the entire park. Using the top ribbon, select Share &gt; Export Map. A pane will pop up on the right-hand side of your screen. The file type is PDF, and make sure that it is saved somewhere you will be able to find it. Toward the bottom of the pane, make sure that the box under “PDF Settings” that says “Export georeference information” is selected. Then select export. This will be used when you are collecting data with Avenza. Step 4: Now that you have established a study area, you need to decide when you will be collecting your data. There are times in the day where you are more likely to get accurate GNSS readings. Find the coordinates of your study area so that you can use them in the Trimble GNSS Planning Online website (http://www.gnssplanning.com/). Go to the Trimble GNSS Planning Online website and enter your study area’s coordinates (one set of coordinates from anywhere within the study area) and elevation. If your coordinates are not in the proper units, either convert them to the proper units. Choose the day that you plan to visit your field site and collect data. After you have input your information into Settings, click “Apply” and look through the other tabs (Satellite Library, Charts, Sky Plot, World View). Using the information on the website, determine the ideal time to collect your GNSS points. Justify your chosen time using the data on the website (this justification should be included on your report, along with screenshots from the webpage). Task 2: Collect GNSS Data You will need either an Android or iOS smartphone capable of installing the Avenza Maps App. If you do not have an Android or iOS smartphone, then please contact the instructor for alternative arrangements or accommodations Step 1: To start you will need to install Avenza Maps App on your phone. There is an Android version as well as an iOS version so just go to your app store and download it. It’s free! Step 2: Once you have the app installed on your phone, you need to sign up for a free account. If you have concerns about your privacy, you can use a pseudonym and your student UBC e-mail address.Avenza Maps is a widely used mobile mapping application, so chances are you might continue to use it in the future for other projects or hobbies. If you want to ensure future access to your Avenza Maps account and assets, then choose an e-mail account that you will continue to have access to (i.e., not your UBC student e-mail). Step 3: Now that you are registered and logged in, you will change some settings in the Avenza Maps app. Navigate to the Settings in the bottom right corner (for iOS) and in the top right corner (for Android). Scroll down and click “GPS settings”. Use the following settings: Location Source: “Use Only Internal Sources”. This ensures that we are only using the phone’s internal GNSS receiver. Horizontal Accuracy: “Keep all fixes” Distance Thresholds: “Keep all fixes” Time Threshold: “Keep all fixes” Ignore Suspicious Fixes: Toggled Off Next, we will set the units to metric. In Settings, navigate to “Units of Measurement” and select “Metric” at the top. Under “Coordinates”, ensure that the “Format” is set to a workable coordinate system. Step 4: Ensure that the Avenza Maps App is allowed to access your location, camera, and photos in your phone’s settings. Important: Personal location is very sensitive information. You should not undertake this exercise at your home or share the coordinates or screenshots of your home location in Avenza Maps with anyone, including the instructor, TA, or other students in this course. Treat personal location information as any other private sensitive information and handle with respect and care. Step 5: Avenza Maps requires you to load a map before being able to use the location service of your phone. You will import the georeferenced PDF map that you created in Task 1. There are several ways to do this in Avenza Maps, but probably the easiest is to download the PDF to your phone and then import directly from your phone. Be aware that map size can be large and will consume cellular data if you are not connected to a wifi network. If you ran into problems creating your georeferenced PDF, then you can use the provided georeferenced PDF on Canvas for the world. In the end, the actual map that you use is not important for collecting your GNSS data, but Avenza Maps requires a georeferenced map be loaded in the app. Step 6: Travel to your study area!!! Open the Avenza app, and select the Georeferenced PDF under “My Maps.” Go to one of the reference points you selected in ArcGIS. On the bottom right of the app, there is a button that will bring the map to your current area. Press that button, then press the placemark button directly to the right of it. Create a placemark and name it something meaningful (for example: placemark 1, location 1). Stay exactly where you are, and create a placemark every 10 seconds for the next minute by pressing the location button then the placemark. You should have a total of 6 placemarks. Take a picture of the area you are trying to geographically capture. Go to two more of your designated locations and do the same procedure (create 6 placemarks, each 10 seconds apart, and take a picture. Step 7: Now you can return back to your workstation (after taking a nice walk!). In Avenza, go back to “My Maps,” then select Layers (at the bottom). Select the layer you created, then the icon with three lines at the bottom right. Choose export layers. Export the layer as a KML by pressing the EXPORT option at the top right. A list of export applications should pop up—choose whichever one you would prefer. Step 8: Find your exported file and bring it into ArcGIS Pro. You can drag and drop it from the Catalog Pane into the main map. From there, you should export the kml file to layer using the tool “KML to Layer.” Task 3: Assess Precision, Accuracy, and Possible Errors For this lab, we will consider the initial ArcGIS-created reference points as the “true” values and perform an accuracy assessment with that in mind. Step 1: Visually compare the Avenza-created Placemarks (called “Observed values” for the rest of the lab) with each other and ArcGIS reference points. How close/far are they from one another? You can use the measure tool to add values to this visual assessment. When you are comparing the observed values to each other, you are assessing precision, when you are comparing them to the “True” locations, you are assessing accuracy. Step 2: Quantitatively determine the accuracy of the points. Add two columns in the Observed attribute table and populate them with the east and north values for each point. You should have the True values from your reference point attribute table. Export both tables and bring them into excel. Calculate the horizontal accuracy for each placemark using the following equation: \\(\\sigma_{H_{acc}} = \\sqrt{(\\overline{E} - E_{true})^2 + (\\overline{N} - N_{true})^2}\\) Excel is a convenient place to use this equation. Breaking down the equation – get the mean observed East value, then subtract the “True” East value. Square this difference. Do the same for North. Add the north and east results, then take the square root of them. In excel, you can do this with the equation: =SQRT((average(observed east values)-true east value)^2+((average(observed north values)-true north value)^2)) The resulting value represents how accurate the GNSS measurements were – a lower value represents greater accuracy. Is there a noticeable difference in accuracy between your placemarks? Why do you think this is? To assess the precision, you will use the following equation: \\(\\sigma_{H_{pre} = \\sqrt{\\sigma^2_E + \\sigma^2_N}}\\) Calculate the standard deviation of the observed East and North values, square them, then add them and take the square root of the sum. In excel, you can do this with the equation: =SQRT((STDEV(observed east values)^2 + STDEV(observed values)^2)) The resulting value represents how precise the GNSS measurements were – a lower value represents greater accuracy. Is there a noticeable difference in precision between your placemarks? Why do you think this is? Lab Deliverable (40 points total) A short (maximum two page) lab write-up that goes through the lab process from planning, to data collection, then to data analysis. Place your figures, tables, and/or screenshots at the end of the document, which do not contribute to the maximum page count. Within the write-up, be sure to include the following: Overall (5 points) Margins, 12-point font Single-spaced Maximum of two pages of written text Organized and writted scientifically Planning (10 points) Basic information about the study area – why it was chosen, where it is, etc. (2 points) A description of each reference point – what is each reference point? (2 points) A runthrough of the results from the GNSS planning tool. When is the ideal time to go out and why? Include screenshots from the planning tool (# of satellites, DOPs, ionosphere, skyplot) and interpret them. (6 points) Data Collection (5 points) Some details about the tools used (e.g., How old is your phone?) (1 point) Field conditions and time of data collection (1 point) A brief description of the data collection procedure (2 points) Images from each reference point (1 point) Analysis (20 points) A map showing True and Observed points (6 points) A table containing accuracy and precision values for each placemark (2 points) An interpretation of the table for each placemark (2 points) A discussion of potential errors and what may have affected accuracy and precision – be sure to reflect on the validity of the “True” values (10 points) "],["carto-modelling.html", "Lab 3 Cartographic Modelling Lab Overview Task 1: Download and prepare data Task 2: Capability Task 3: Suitability Task 4: Build a Suitability Model Task 4: Create and export a map", " Lab 3 Cartographic Modelling Written by Amy Blood Lab Overview In geomatics, you will often need to answer questions related to how well situated an object is dependent on its surroundings. In urban forestry for example, you might look at the ability for a tree to thrive given (a) soil characteristics, (b) how far the tree is from pollutant-heavy roadways, and (c) the number of tree vandalism crimes in the neighborhood. With data from several tree planting sites, these overlay and proximity factors can be combined using models to complete capability and suitability analyses. For this lab, you are using overlay and proximity tools to determine where in the City of Vancouver would be suitable for a new community garden. Learning Objectives Download and merge census data with a spatial data Use model builder to automate geospatial tools Create professional maps following cartographic standards Deliverables Answers to any questions posed in the lab handout Your suitability toolbox A pdf map complete with all necessary elements (scale, compass, legend, etc.) Task 1: Download and prepare data Step 1: Download data. You will be downloading most of your data from the City of Vancouver Open Data Portal (https://opendata.vancouver.ca/pages/home/). The datasets you will need to download from the open data portal above are: Community Gardens and Food Trees (shapefile) Local Area Boundary (shapefile) Census Local Area Profiles 2016 (xls) A fourth dataset (Landuse 2016) can be found on the course management system. This shapefile was downloaded from Metro Vancouver’s Open Data Catalogue; however, at least two of the polygons had errors and needed to be edited for the analysis to work properly. Download all of the lab data and put it in a new ArcGIS Pro project folder. Step 2: Pre-process census data. Census data requires pre-processing before loading it into ArcGIS. The census data you downloaded was custom-ordered from the City of Vancouver and is delineated by Vancouver’s 22 planning districts. Open “Census Local Area Profiles 2016” in Excel. There is a lot of information in this file, and you’re encouraged to scroll through it (and/or its metadata). The first four rows in the workbook are descriptive information and need to be removed before analysis; select and delete them. Now the first row should have planning district names. The values in the second row (ID 1) represent the approximate population value in each planning district. Now you need to filter the data to only keep “Total - Age groups and average age of the population -100% data” and “Median total income of households in 2015 ($)”. Select the “Variable” column (Click on the B above the cell that reads “Variable”). Then select “Data” in the top ribbon &gt; Filter. The cell should now have an arrow representing a dropdown menu. Within the dropdown, click Text Filters &gt; Equals. Show rows where Variable: equals “Total - Age groups and average age of the population - 100% data” OR equals “Median total income of households in 2015 ($)” Click OK. Be sure to either type the variable names EXACTLY as they appear, or select them from the dropdown menu in the Custom Autofilter window (the variables are alphabetized but there are many of them). If the filter does not work, you can search for the columns using the control/command-f feature and manually select the appropriate rows. You should have only two rows of data, with IDs 1 and 3964. Copy the data and column names, create a new sheet, then Paste Special them transposed into the new sheet. The transpose option is underlined in red within the image below. Remove the ID row and both of the rows that start with “Vancouver.” The current column names are too long, have spaces, and contain special characters. These features would all cause issues in ArcGIS Pro. Additionally, two of the three column names are not meaningful to your current dataset. Rename your columns: “Variable” -&gt; Plan_Dist “Total - Age groups and average age of the population - 100% data” -&gt; Population “Median total income of households in 2015 ($)” -&gt; Med_Hou_Inc Lastly, add/remove spaces from the Planning District names in the excel sheet so they match the names in local-area-boundary.shp. The census data contains a space after most of the planning district names, and local-area-boundary.shp does not. Remove the extra spaces after the Planning District names in excel—all but Victoria-Fraserview have a space at the end. You can do this manually, or by using the equation below. A2 is the Planning District Name, and the -1 represents removing the last character from the string (in this case, a space). You should not use this equation for Victoria-Fraserview. =LEFT(A2, LEN(A2)-1) Save the sheet as census.csv Step 3: Join the census data with a shapefile. Now you are going to view the census data spatially by joining the local area boundary shapefile with the census csv. Open ArcGIS Pro, and add local-area-boundary.shp. Right-click the shapefile in Contents &gt; Joins and Relates.. &gt; Add Join. For the tool: Input Table: Local Area Boundary Input Join Field: name Join Table: census.csv Join Table Field: Plan_Dist Click OK. Open the attribute table of local-area-boundary.shp to verify that the join succeeded. If the join did not succeed, it is likely because the cells in census.csv did not exactly match those in local-area-boundary.shp. Double-check that the spacing is the same for both datasets. If the Arbutus-Ridge neighbourhood does not have a match, ensure that the “-” is present in both tables and manually enter it if it is missing. Your join should automatically update. To redo the join, right-click the shapefile in Contents &gt; Joins and Relates.. &gt; Remove All Joins. Then repeat Step 3. Q1. Which neighborhood has the highest median income? Q2. If you were to have to calculate population density, how would you accomplish this? Task 2: Capability Step 1: Identify locations in Vancouver that are capable of having a new community garden. Add Landuse2016.shp to your map and look at its metadata in Catalog View (View &gt; Catalog View). Here you will see information about the dataset, including what each LU_code means. Calculate the area in ha of each polygon using “Calculate Geometry”. When creating new field names, remember that you cannot use spaces or special characters such as parentheses. Keep column names simple. Use “Select By Attributes” (either in the Map Tab of the top ribbon, or at the top of the attribute table) to select the two land uses that have the capability to be used as potential community garden spaces (R100 &amp; U100). Additionally, select only those land uses that are greater than 0.1 ha in size. For the tool: Input Rows: Landuse2016 Selection Type: New selection +New Expression: Where LU_code is equal to R100 +Add Clause And areaha is greater than 0.1 +Add Clause Or LU_Code is equal to U100 +Add Clause And areaha is greater than 0.1 Click OK. With these selected, you are going to run the “Identity” tool. For the tool: Input Features: local-area-boundary Identity Features: Landuse2016 Output Feature Class: Van_Capable Attributes To Join: All attributes Click OK. Your result will have the same extent as local-area-boundary.shp, and will have polygons for each neighborhood and each capable location. There should be three unique values in LU_code: R100, U100, and no value (the cells should be blank). Change the symbology of resulting shapefile (by LU_code) and look at what you have; everything that has a blank LU_code is incapable. It is possible that the input will erroneously apply attributes from some Landuse2016 polygons to larger areas. Verify that there are no excessively large parcels, such as in the area of the Musqueam 2 reservation. Identify which landcover FID is causing the issue, and then manually de-select it before re-running the identity tool. Create a new field (of Data Type Short) called capable, and populate it with the number 1 for capable areas and the number 0 for incapable areas. This can be done using Select By Attributes and Calculate Field (once the selected polygons are populated with 1, you can switch the selection and populate the others with 0). Q3. What were the capability requirements in this assignment? Step 2: Quantify the area that is capable. Some of the polygons in Landuse2016.shp were split by the identity tool, and others were merged. Recalculate the area in ha. Now, you will determine how much area is capable and how much is not. Open “Summary Statistics” by right-clicking the capable column in Van_Capable. For the tool: Input Table: Van_Capable Output Table: Cap_SumStats Statistics Field(s) Field: Areaha Statistic Type: Sum Case field: capable Open Suit_SumStats and look at the resulting summary statistics. Q4. What percentage of vancouver’s total area might be capable of having a new community garden? Task 3: Suitability Now that we know the possibly capable areas, we are going to determine which of them are most suitable. Step 1: Determine which areas are close to existing food trees and community gardens. Add community-gardens-and-food-trees.shp to your map. Use the “Multiple Ring Buffer” Tool to identify areas which are very close (within 200 m), close (between 200 and 400 m), and somewhat close (between 400 and 600 m) from existing food trees are community gardens. For the tool: Input Features: community-gardens-and-food-trees Output Feature Class: garden_buffer Distances: 200 +Add another 400 +Add another 600 Distance Unit: Meters Buffer Distance Field Name: distance Dissolve Option: Non-overlapping (rings) Click OK. Now you are going to run the “Identity” tool to add the buffer information to your capability dataset. For the tool: Input Features: Van_Capable Identity Features: garden_buffer Output Feature Class: Van_Suit Attributes To Join: All attributes Click OK. Step 2: Assign suitability values to garden buffers and median household incomes. In Van_Suit.shp, create a new field (Data Type: Float) called gard_suit. Populate the fields with 0 for the closest buffer, 0.25 for the close buffer, and 0.75 for the somewhat close buffer. All of the polygons outside of the buffer now have the distance field populated with “0”. This is incorrect, as the distance is beyond 600. You can populate the 0’s with -1 if you would like, just to keep track of the represented distance. Select all of the rows with a distance beyond 600, and populate the gard_suit column with the value 1. Community garden building will be prioritized in low income areas. In Van_Suit.shp, create a new field (Data Type: Float) called inc_suit. You will populate this with income values normalized from 0-1, with 1 representing the most suitable and 0 representing the least suitable. To scale the income values, you will divide the income values by the maximum income value. However, this result causes higher income areas to have values closer to 1 and lower income areas to have values closer to 0. The result should then be subtracted from 1. The equation would look something like this: inc_suit = 1 – (med_hou_inc/max(med_hou_inc)) You may have to manually identify the maximum value in med_hou_inc by right clicking on the attribute and selecting “Explore Statistics”. Step 3: Calculate suitability. Finally, the suitability and capability fields can be combined to determine overall suitability. Create one final field, named suitability (Type: Float). Suitability is determined by weighting each suitability metric – a metric that is more important is given a larger weight. The total weight must add to 1. For example, if distance to an existing community garden was deemed to be three times as important as median household income, distance to a community garden would be weighted 0.75 and income would have a weight of 0.25 Each weight is then multiplied by its respective scaled value, and then the results are added. The entire suitability calculation must be multiplied by the capability values so that only capable areas are considered. For the above example, the equation would look like this: suitability = capability*(0.75*gard_suit + 0.25*inc_suit) For this exercise, distance from a garden will be weighted the same as median household income. Calculate suitability, with the weight for distance from a garden set to 0.5 and the weight for median household income set to 0.5. Q5: What features made an area more suitable? Q6. Which neighbourhood had an income suitability of zero? Q7. What is the area (in ha, with two decimal places) of all spaces that have a suitability of greater than 0.5? Q8. What are the differences between suitability and capability models? Task 4: Build a Suitability Model Models allow for easy replication of tasks. You will be building a model using the workflow in Task 3. Step 1: Prepare model building. Open the Catalog Pane, and right-click the folder you have been saving things into. Select New&gt;Toolbox. Name the toolbox “Suitability”. Then, right-click the Toolbox and Select New&gt;Model. If ModelBuilder didn’t open automatically, right-click your Model and select “Edit”. A blank pane should appear, with your model name as the tab name. Also open History (Analysis &gt; History). Step 2: Build the model! Drag and drop the completed actions from Task 3 (“Multiple Ring Buffer” and “Identity”) into the ModelBuilder pane. The tools should automatically be connected, because the results from “Multiple Ring Buffer” were used in “Identity”. If you no longer have the geoprocessing steps in History, you can (a) run the tools again, or (b) add the tools and input the variables. After you run the tools, they will show up in History and you can drag and drop them into the ModelBuilder pane. You can drag and drop the tools directly from their respective toolboxes within the Geoprocessing Pane. Then in ModelBuilder, you can right-click each tool (as displayed by rounded rectangles), select open, and fill out the tool options as you did in Task 3. When a section of the model is complete, the shapes will go from grey to coloured. To connect the model components, you click on a component (and while holding the pointer down), drag the arrow that appears from one component to another. Once you let go, options for what the component is in the model will pop up. Your model is not complete if it is still in grey—a complete model is coloured. However, non-connecting tools will also be coloured. The tools in your model should connect. For more help with ModelBuilder, use ArcGIS Help (Project &gt; Help &gt; ModelBuilder (in the search)). https://pro.arcgis.com/en/pro-app/latest/help/analysis/geoprocessing/modelbuilder/modelbuilder-quick-tour.htm Your model should look similar to the one below. Q9. Why are models like this one valuable? When would you use this kind of model? Q10. Include a screenshot of your model Task 4: Create and export a map Lastly, you will be making a map showing capability and suitability. Include your capability and suitability maps in the same layout. Include an inset of the area that is most suitable for a community garden. Be sure to use a proper colour ramp— quick examples of when to use which type of colour ramp can be found at the following website (https://carto.com/carto-colors/). What we expect to see: Capability Map Suitability Map Suitability Inset Necessary map components (title, legend, scale bar, north arrow, student name, coordinate system) To export the map, find “Layout” under the share tab. Select PDF as the file type, and use an appropriate resolution. Open your exported map and make sure that everything on the map is legible Export your map to PDF and include it in you final report along with the other lab questions. "],["RS-imagery.html", "Lab 4 Remote Sensing Imagery Analysis Lab Overview Task 1: The EMS Task 2: Landsat 5 Bands, the EMS &amp; ArcPro Software Task 3: Calculating NDVI and Built Up Index Task 4: Reclassifying Spectral Indices and Map Making", " Lab 4 Remote Sensing Imagery Analysis Written by Paul D. Pickell Lab Overview The aim of this lab is to learn about the electromagnetic spectrum (EMS), understand spectral properties of different surfaces, and get comfortable using ArcGIS Pro to load and explore different types of remotely sensed images, display individual spectral bands, make different colour composites, and view spectral signatures. In addition, you will calculate two difference spectral indices representing built up areas and green vegetation. Learning Objectives Differentiate regions of the electromagnetic spectrum for urban applications Use Landsat 5 spectral reflectance to map vegetation and urban areas Analyze spectral signatures of different land cover types Deliverables You will need to submit your answers to the questions given in the lab handout. Data We will be working with a multispectral image of Vancouver from the Landsat 5 satellite (L5047026subset_19990922_7B.dat). Task 1: The EMS The electromagnetic spectrum (EMS) is the distribution of electromagnetic radiation according to wavelength/frequency, and includes radio waves, visible and infrared light, x-rays, gamma rays, and more. In remote sensing, we use the reflective, absorptive, and emissive properties of terrestrial features to identify and measure them (i.e. how do different wavelengths in the EMS interact with the surface of the Earth?). Note: It is important to recognize that the visible part of the EMS is the only section that humans can see. All colours in the visible spectrum are wavelengths, but not all wavelengths in the EMS are colours. Spectral Reflectance Figure 1 shows the reflective characteristics of various features of the earth’s surface. Use this figure to answer Q1 – Q4. Figure 1: Reflectance characteristics of various features at different wavelengths. Q1. For broadleaf and needle-leaf vegetation, what is the approximate wavelength that is reflected most, and what section of the ems does this range belong to?? Q2. Do soil and vegetation reflect roughly the same proportion of blue light. Q3. Give a wavelength (in microns) at which snow and ice, dry soil, and vegetation are indistinguishable by their reflectance. In other words, at which wavelength is the proportion of radiation reflected the same (+/- 10%) for these features? Q4. Broadleaf and needle leaf vegetation reflect the same amount at 0.7 microns. What causes this? Is there something contained in the foliage of both types of vegetation which causes identical spectral signatures? How does this pattern in spectral reflectance affect how we see live vegetation? Figure 2: Reflectance characteristics of unknown features. Q5. Figure 2 contains 4 additional spectra, belonging to unknown surface features. Hypothesize about what these spectra might be and provide your reasoning. Use the known features (broadleaf vegetation, wet soil, etc.) and what you have learned from class/readings to inform your choices. This is a difficult task, and educated guesses are all that is asked for. Do a bit of research, put some thought into it, and explain the reasoning for your guesses. These spectra do not represent the features which are already labeled. You must think of new features which could be observed with remote sensing. Task 2: Landsat 5 Bands, the EMS &amp; ArcPro Software Table 2: Parameters of Landsat 5’s Enhanced Thematic Mapper (ETM+) sensor Band Wavelength Range (microns) Spectral Region Spatial Resolution (meters) Applications 1 0.45-0.52 Blue 30 Coastal water mapping, differentiation of vegetation and soils. 2 0.52-0.60 Green 0 Assessment of vegetation vigor. 3 0.63-0.69 Red 30 Chlorophyll absorption for vegetation differentiation. 4 0.76-0.90 Near Infrared 3 Biomass surveys and delineation of water bodies 5 1.55-1.75 Middle Infrared 30 Vegetation and soil moisture measurements. Differentiation of ice and clouds. 6 10.40-12.50 Thermal Infrared 60 Thermal mapping, soil moisture studies, plant heat stress measurement 7 2.08-2.35 Middle Infrared 30 Hydrothermal mapping Q6: Each pixel of landsat’s thermal infrared band (band 6) covers ___ pixels of the other bands. If it helps, draw a picture of the two pixel resolutions. Q7: Band 6 is recorded with a coarser resolution because thermal radiation has a very ___ wavelength. Therefore, there is ___ energy available to sense. Step 1: Starting ArcGISPro To start the lab, Open a new ArcPro map project and open the the L5047026subset_19990922_7B.dat file into the map window. At this point, you should see an RGB satellite image of the city of Vancouver (Figure 3) if the mapview does not immediately pan to the image right click L5047026subset_19990922_7B.dat in the Contents pane and press Zoom to Layer . Figure 3: True colour composite of Vancouver. Step 2: Exploring the data It is now time to explore your imagery. Right click the box beside the L5047026subset_19990922_7B.dat file in the Contents pane and select “Properties”. Use the menu on the left-hand side and select the Source page and the Raster Information drop down. After clicking on the Raster Information, the tab should open up, and display important information about the image, such as dimensions (number of pixels in the X or Y directions), data types, projection, and resolution (listed as Projection/Pixel). This information can be useful when examining an image! From the Raster Information you can see that the spatial resolution of this image is approximately 30 m by 30 m, square. That means that each pixel in the image represents an area of approximately 30 x 30 m on the ground, or 900 square meters. Furthermore, it is a Landsat 5 Thematic Mapper image of Vancouver and its surroundings taken at 22 September 1999 - Wow! Even more details are apparent – its size is 4000 by 3000 pixels, and has seven bands. Scroll down and press on the Spatial Reference to see the projection information. We will now use ArcGIS pro to zoom and pan our image. Notice the Map ribbon at the top, navigate to it and hover you mouse of the Explore tool: Use these controls to zoom in and out of the image and to pan around, try to zoom into the Fraser estuary and navigate upriver. Included in the Navigate pane there are also the fixed zoom tools the previous extent arrows and the small globe which will zoom to the full extent of your data. Step 3: Displaying Greyscale, True Colour, &amp; False Colour Imagery Traditionally, single bands of imagery are shown in greyscale, with dark areas shown in black, and light areas shown in white, with anything else shown in shades of grey. Think of each pixel representing a number between 0-255 (byte data type range, the same one of this very imagery!), with areas colored pure black representing the number 0, and areas colored pure white representing the number 255, and everything else is a shade of grey increasing in lightness from 1-254. The figure below displays this concept. Right click on you data in the Contents pane and select “Symbology”. The symbology pane should appear on the side of you window. Press the drop down menu and select “Stretch”. In the next dropdown menu labeled “Band” select “Band 4 NIR” you should see the same image as below. You have now displayed a single band of greyscale imagery. Pixels that are bright/light/white have high amounts of light being reflected back to the sensor in this section of the EMS. Pixels that are dark/black have high amounts of absorption in this section of the EMS. Behind the shades of grey are actual numeric values indicating how much reflected light the sensor detected (from 0-255), that indicate what shade of black/grey/white should be shown. This is a critical component to understand about remote sensing data sets. When more than 1 spectral band is available for a given image (like the Landsat data provided), colours can be used for visualization. Computer monitors display visible light as combinations of red, green, and blue using the RGB colour model. Remember that the colours we see are also a wavelength in the EMS. e.g. Red – 660 nm, Green – 560 nm, Blue – 480 nm In a true colour image, the computer display visualizes objects the way we see them in real life. In other words, in a true colour image, Landsat band 1 (Blue – 480 nm) is displayed as blue, band 2 (Green – 560 nm) is displayed as green, and band 3 (Red – 660 nm) is displayed as red. Any combination where this is not the case is a false color composite, where the colours chosen to visualize the data are not true to life, i.e. Landsat band 1 (Blue – 480 nm) is displayed as red, band 2 (Green – 560 nm) is displayed as blue, and band 3 (Red – 660 nm) is displayed as green. Visualizing wavelengths outside of the visible spectrum (Landsat bands 4-7) automatically apply as false colour composites. False colour composites are necessary because many remote sensing devices can measure a broader range of wavelengths than humans can see. As a result, in order to display these data visually for humans, they must be displayed using a part of the spectrum that humans can see (Red, Green, Blue). In the Symbology pane navigate back to “RGB” in the first dropdown list. Your image should change back into a True Colour Landsat image where band3 red is visualised as red, band 2 green is visualised as green and band1 blue is visualised as blue. By displaying false colour composites it is possible to display many band combinations of the image on our screen. This time you will create a false colour composite by selecting different wavelengths (bands) to be visualized using red, green and blue colours. In the Symbology pane under their respective drop done lists visualize the following band combination. Band 4 using Red Band 2 using Green Band 7 using Blue You should see the following: You can experiment with different band combinations by visualizing different bands using Red, Green and Blue. A standard false colour composite, for instance, has Band 4 visualized using Red, Band 3 visualized using Green and Band 2 visualized using Blue, as shown below: Right click the bands in the Contents pane, turn different layers on and off by clicking the check mark off and on in the IsVisible section. Zoom and pan around and investigate different areas of Vancouver that you may know. Feel free to use google maps or google earth to help you orient yourself. Q8. In a false color composite where near landsat band 5 is mapped to the red color channel, band 4 is mapped to the green color channel, and band 3 is mapped to the blue color channel, match the following cover types to the colors that they appear in the image. Q9. Experiment with many different false colour composites. Which 3 bands would you combine if you wanted to analyze vegetation? Do some light research on spectral properties and the applications of different landsat bands and write a sentence or two justifying each of your choices. Then, append a screenshot of your chosen composite to your response. Q10. Experiment with many different false colour composites. Which 3 bands would you combine if you wanted to analyze water quality? Do some light research on spectral properties and the applications of different landsat bands and write a sentence or two justifying each of your choices. Then, append a screenshot of your chosen composite to your response. Q11. Experiment with many different false colour composites. Which 3 bands would you combine if you wanted to analyze agriculture? Do some light research on spectral properties and the applications of different landsat bands and write a sentence or two justifying each of your choices. Then, append a screenshot of your chosen composite to your response. Q12. Experiment with many different false colour composites. Which 3 bands would you combine if you wanted to analyze urban areas? Do some light research on spectral properties and the applications of different landsat bands and write a sentence or two justifying each of your choices. Then, append a screenshot of your chosen composite to your response. Step 4: Viewing Spectral Signatures Now it is time to examine your data set more thoroughly. At the beginning of this lecture we examined the spectral signatures of different materials. We will now do the same thing for the different sections of our Vancouver Landsat image. Right click on the L5047026subset_19990922_7B.dat file in the Contents pane and select Create Chart -&gt; Spectral Profile. The Chart Properties pane should appear on the right side of your screen and the spectral chart on the bottom. In the Chart properties pane under “Define an Area of Interest” select “point” and then click a pixel on your map. Change the colour and select a variety of different points representing different land cover types (Urban, forest, water, crops, snow). You might have to resize the spectral chart at the bottom of your screen in order to see the different profiles. Your chart should look something like this. Q13. Examine your new spectral profile chart, compare the different profiles you created to the spectral profiles in figures 1 and 2. What is different between them? Why might your spectral curves look different than the ones above? Q14. Take a screenshot of your spectral plot and paste it in your final report. Task 3: Calculating NDVI and Built Up Index Spectral indices are mathematical equations containing spectral reflectance values from two or more wavelengths used to highlight areas of spectral importance in an image. There are a wide variety of spectral indices used to highlight a variety of different land covers and image properties including burned Areas (Normalized Burn Ratio), urban/ built up areas (Normalized Difference Built-Up Index), and water (Normalized Difference Water Index) to name a few. The Normalized Difference Vegetation Index (NDVI) is a frequently used spectral index that takes advantage of the high near-infrared reflectance and high red absorption properties of healthy vegetation and is therefore often used to quantify vegetation in a remotely sensed multispectral image. NDVI is calculated with the below formula: \\(\\ NDVI = \\frac{(NIR - RED)}{(NIR+RED)}\\) Where NIR is the near-infrared band (Landsat 7 Band 4) and Red is the red band (Landsat 7 Band 4). The results of this equation should be between -1 and 1 with values less than 0 representing water and values between 0-1 representing different levels of green vegetation. While ArcGIS Pro contains a built-in tool to calculate NDVI and a series of other spectral indices, in this lab we will be using the “band arithmetic” function and the above equation to create our own NDVI tool. Navigate to the Imagery ribbon at the top of your ArcPro window and click the Raster Function button. The Raster Functions pane should appear, you can either navigate the drop down menus to Math-&gt; Band Arithmetic or use the search function to find the Band Arithmetic Tool and click to open. The “Band Arithmetic Properties” dialogue should appear. Under “Raster” use the drop down menu and select the L5047026subset_19990922_7B.dat layer. If it is not currently in your map view and can use the folder button and navigate to your lab data folder and select the file. Under “Method” select User Defined. It should look like the screen shot below. Use your knowledge of spectral indices, the NDVI formula given above and the table below fill in the NDVI calculation for your data. Q15. Take a screenshot of your band arithmetic equation for ndvi. Q16. What are the minimum and maximum values of your new ndvi layer? Q17. What do the dark areas in the image represent? The gray areas? The white? Q18. What information does this type of analysis give us? When and why might this tpye of analysis be used? We will now use the “Band Arithmetic” window to calculate the Normalized Difference Built-Up Index (NDBI). The NDBI highlights urban areas where there is typically a higher reflectance in the shortwave-infrared region compared to the near-infrared region. The equation is as follows: \\(\\ NDBI = \\frac{(SWIR-NIR)}{(SWIR+NIR)}\\) Open the “Band Arithmetic” function and select the Landsat scene as your input raster. Under “Method” use the drop-down menu and navigate to NDBI. Using what you know about Landsat imagery select the proper bands for calculating NDBI under the “Band Indexes” box and then select “Create New Layer”. Task 4: Reclassifying Spectral Indices and Map Making In the section you will use a technique called Thresholding and the reclassify tool to extract highly vegetated areas (High NDVI) and urban areas (High NDBI) and then create a map with these layers overlaid with the provided satellite imagery. Under the Analysis ribbon select the Tools option. The geoprocessing window should appear in the search box type “Reclassify” and select the option with (Spatial Analyst Tools) beside it. Under “Input Raster” select the NDVI layer you created earlier. The “Reclass field” should automatically become completed and a “Reclassification” table should appear below. Select the Classify button at the bottom of the table and enter “2” for number of classes. For the first row leave “Start” as is and enter 0.49999 under “End”, change “New” to “NODATA”. For the second row change “Start” to “0.5” and leave “End” as 1 and change “New” to “1”. The Reclassify tool takes the old values from a raster and creates a new raster layer with updated values based on the Reclassification table. In this case we as saying take all pixels with values less than 0.5 and make them NODATA or blank and take all pixels with values greater than 0.5 and make their value 1. Under “Output Raster” save the file as “High_Vegetation_Areas” and press Run at the bottom of the window. Now use the Reclassify tool to create a new layer from the NDBI where all you keep only pixels with values above 0 and change there value to 1. Save this layer as “Urban Areas”. Making your map Now is the time for your cartographic skills to shine. To design a map of the highest quality you will need to draw on all of you GIS skills. Ensure you include all the standard components of a map along with your artistic flair. If you need some inspiration a quick google search for “Design principles for cartography” or browsing through some of the maps featured here should do the trick: https://www.esri.com/en-us/maps-we-love/gallery You should design a map that shows your High_Vegetation_Areas and Urban_area layers overtop of the provided Landsat Imagery. Pick appropriate colours and transparency for each layer. Also, be sure to include important data, but also make sure the map is not too cluttered. The physical requirements are as follows: Map should be 11”x17” either as a landscape or portrait layout You should export the map as a pdf Your map should incorporate the suite of standard map elements: Title, scale bar, compass, legend. "],["lidar.html", "Lab 5 Geovisualization using LiDAR Lab Overview Task 1: Load and explore the LiDAR data Task 2: Create a Digital Terrain Model Task 3: Create a Digital Surface Model (DSM) Task 4: Create a map Task 4: Exploring a scene", " Lab 5 Geovisualization using LiDAR Written by Francois du Toit Lab Overview The aim of this lab is to use LiDAR data from the City of Vancouver to create a Digital Terrain Model (DTM) and a Digital Surface Model (DSM). We will then investigate how these methods compare to one another, and explore their strengths and weaknesses. Additionally, we will explore 3D visualization in ArcGIS Pro using Scenes. Learning Objectives Process LiDAR data to standard products Augment urban scences with LiDAR derivatives Deliverables Answer all the questions given in the lab handout. A map of your DTM and DSM. Screenshots of your LiDAR visualizations. Data We will be working with LiDAR data collected over the City of Vancouver. There are two files associated with this lab: Vancouver_lidar.las: The LiDAR data file. LAS is the standard file type for LiDAR data Vancouver_Ortho.tif: An orthophoto of our study area, which was collected at the same time as the LiDAR data Information on LiDAR collection and specifications: https://opendata.vancouver.ca/explore/dataset/lidar-2018/information/ Task 1: Load and explore the LiDAR data Step 1: ArcGIS Pro has several tools that we can use to view and analyse LiDAR point clouds. In order to view the dataset, we need to import it as a LAS Dataset. On the analysis tab, click the tools button and type ‘Create LAS dataset’ in the search box. Specify your input file as all of the .las files in the LidarVan folder this lab. Name the output LAS Dataset Van_lidar.lasd and specify a coordinate system (hint: look in the specifications website). Check the ‘Compute Statistics box’. Surface Constraints can be left blank, and we want to make sure that ‘All LAS Files’ are selected for ‘Create PRJ For LAS Files’. Q1. What is the horizontal datum for the las dataset? Q2. What is the vertical datum for the las dataset? Step 2: We can now add our LAS Dataset to a Map document (insert New Map). Depending on the zoom extent, you may only see the red bounding box of the las file; this isn’t an error, you just need to zoom in to see the actual points. Alternatively, you can open the dataset in a ‘Global Scene’, although due to the size of the point cloud this might cause some lag. The default display is that no point cloud filters are applied; if you want to view only ground points, right click on the file, navigate to ‘LAS Filters’, and click ‘Ground’. If you want to investigate what the city looks like, you can add the Vancouver orthophoto. Figure 2: Viewing and filtering the dataset Another way to explore the dataset is to use the Catalog. Right click Van_lidar.lasd and click on Properties. Here we can see some statistics of the point clouds, such as information regarding the Classification Codes and Returns Number. Q3. What is the average point spacing of the dataset? Q4. What percentage of points are classified as ground? Task 2: Create a Digital Terrain Model Step 1: Now that we are familiar with the dataset, we can create a DTM using the easy to use built-in functions. To do so, search for the ‘LAS Dataset to Raster’ tool, and use your LAS Dataset as the input. Since we are interested in creating a terrain model, we want to use the binning interpolation type, and make sure that we use the minimum (i.e. the lowest) points in each cell assignment. Sampling Value refers to the resolution of the raster that we are creating – we want our raster to be 10 m x 10 m. Name this raster ‘VAN_DTM’. Figure 3: Converting the LAS Dataset to Raster Q5. Why is it important to select the minimum value in the cell assignment selection? (2 sentence maximum) Q6. Include a screenshot of your DTM. Q7. How could you validate your DTM? Task 3: Create a Digital Surface Model (DSM) Step 1: Right-click Van_lidar.lasd in the Contents pane and change the filter options to first returns. Step 2: Right-click Van_lidar.lasd again and select Properties, then navigate to the LAS Filter tab on the left and uncheck “1 Unassigned” and “7 Low Noise” under Classification Codes. Press OK. Step 3: Navigate back to the “LAS Dataset To Raster” tool. Output Raster: VAN_DSM Cell Assignment: Average Sampling Value: 10 Click Run and view your output in the map window (Figure 4). Figure 4. Lidar derived DSM of UBC Vancouver Campus Q8. Include a screenshot of your DSM. Q9. What is the range of values in your dsm? What units are these? Q10. Interpret your DSM What features stand out? What features are obscured by the pixel size? Q11. Explain the relationship between the vertical datum, elevation, and height. Q12. What does the impact of cell size have on the surfaces that you created? If you had to redo the lab, would you choose a different resolution? Task 4: Create a map Step 1: Switch ArcGIS Pro to Layout view. You may change the page orientation to landscape instead of portrait if you would like. To do so, go to File -&gt; Page and Print Setup, and change the orientation to landscape. Step 2: In ArcGIS Pro, we can insert as many map frames as we want into our map layout. In our case, we will need 2 maps in our layout, as well as some free space for legends and text. There will be one DTM and one DSM. Display each of these layers in their own map and place them appropriately in the layout. Each map should include only one raster, one of the following: DTM and DSM. Step 3: Change the symbology for both layers from the default to something more visually appealing. Follow the instructions below to ensure that you apply the same symbology to both layers. Start with the elevations. Click on one of the layers representing the interpolated surfaces and select the Symbology tab. Change the Primary symbology to ‘Classify’. Set the number of classes to 7. You may change the color ramp to one that makes sense to you, but make sure that there is enough contrast between classes. Change the symbology of the other surfaces to match the first one (i.e. make sure to match break classes). Add a legend for each symbology definition (Elevation) to the map layout by clicking on a data frame and selecting Insert -&gt; Legend from the top menu bar. Place them on the map layout in a way that makes sense (near the respective layers). Export the map to a PDF (Share -&gt; Export Layout). Include a PDF of your map in your final deliverables Task 4: Exploring a scene Step 1: The first thing that we will do is add a Local Scene (Insert New Map -&gt; New Local Scene). Add Vancouver_Ortho.tif to the scene. We can navigate through the scene using the mouse, or the on-screen navigator (Figure 6). You can learn more about navigation in ArcGIS Pro here: https://pro.arcgis.com/en/pro-app/latest/help/mapping/navigation/navigation-in-arcgis-pro.htm Take some time to play around and explore the scene. One thing we notice is that the imagery does not match the ‘ground’. This is because the ground in the scene is using the default global service, which has a resolution of between 10 and 30 meters. We need to create a custom ground surface to elevate the orthophoto. Step 2: Create a higher resolution DSM. Filter the LAS dataset by first returns and toggle off returns classified as unassigned and noise as you did in Task 2. Using the ‘LAS Dataset to Raster’ tool, create a raster called ‘VAN_DSM2m’ with a resolution of 2 meters, binning the data by ‘Maximum’. Step 3: In the Contents pane, right-click Ground, located below the Elevation Surfaces group layer. Click ‘Add Elevation Source’. Browse to the location of VAN_DSM2m and select it. You can now start to see how the surface features have been incorporated into the surface. Make sure to zoom in to look at areas with high relief and roads. Look at some of the trees on Main Mall. Why might these trees look strange? Step 4: Sometimes it is useful to exaggerate height differences to show a particular aspect of your dataset. To do this, click on ‘ground’ and navigate to the ‘Appearance’ tab (on the top bar). You can play around with the vertical exaggeration here and see how data is displayed differently. You might also be interested in changing the lighting of the scene in order to show what your data looks like at a certain time. Right click on ‘Scene’ and select ‘Properties’ (on the left side of the screen) to access illumination properties. This section is where you can experiment with the lighting of your scene (for example you can set a date and time). Step 5: Export a scene of your choice. With a figure caption, describe what we are looking at, and whether you changed the vertical exaggeration or illumination in the scene (Figure 7). Figure 7: An example of a scene from UBC Campus. Q14. Export a screenshot of a scene of you choice as described in step 5 of the previous section. Q15. What is happening at the edge of the buildings in the 3d orthophoto? What might be causing this? "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
